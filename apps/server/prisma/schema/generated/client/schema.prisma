generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["prismaSchemaFolder"]
  output          = "./generated/client"
}

datasource db {
  provider  = "postgresql"
  url       = env("POSTGRES_PRISMA_URL")
  directUrl = env("POSTGRES_URL_NON_POOLING")
}

model Book {
  id          Int        @id @default(autoincrement())
  name        String?
  cover       String?
  protagonist String?
  description String?
  author      String?
  bookFile    String     @map("book_file")
  bookShelfId Int?       @map("book_shelf_id")
  BookShelf   BookShelf? @relation(fields: [bookShelfId], references: [id], onDelete: Cascade)
  md5         String     @unique
  encoding    String
  isDelete    Boolean    @default(false) @map("is_delete")
}

model BookShelf {
  id          Int      @id @default(autoincrement())
  label       String
  createTimer DateTime @map("create_timer")
  userId      Int      @map("user_id")
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  books       Book[]
  allFlag     Boolean  @map("all_flag")
  isDelete    Boolean  @default(false) @map("is_delete")
}

model User {
  id         Int         @id @default(autoincrement())
  username   String      @unique
  account    String      @unique
  password   String
  sex        String      @default("å¥³")
  email      String?
  avatar     String
  boofShlefs BookShelf[]
  isDelete   Boolean     @default(false) @map("is_delete")
}
